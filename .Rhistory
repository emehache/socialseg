distribuido$distances
roxygen2::roxygenise()
suavizado <- smoothgrid(distribuido, sigma = 200)
suavizado$distances
gridmap <- suavizado
grid <- gridmap$grid
original <- st_drop_geometry(grid)
envir <- gridmap$grid
matriz <- gridmap$distances
matriz
ker <- cvmgof::kernel.function.quart(matriz/gamma) %>%
Matrix::Matrix(sparse = T)
ker <- apply(ker, 1, \(x) x/sum(x)) %>% t
roxygen2::roxygenise()
suavizado <- smoothgrid(distribuido, sigma = 200)
entornos <- environments(distribuido, gamma = 500, vars = vars)
distribuido$values$H
suavizado$values$H
entornos$values$H
entornos <- environments(suavizado, gamma = 500, vars = vars)
distribuido$values$H
suavizado$values$H
entornos$values$H
roxygen2::roxygenise()
data(input)
vars <- c("nivel_edu_alto", "nivel_edu_bajo")
lx <- 100
distribuido <- input %>%
distribute(lx = lx, vars = vars)
distribuido
plot(distribuido, var = vars[1])
distribuido
gridmap
distribuido
str(distribuido)
plot(distribuido, var = vars[1])
distribuido$values$H
suavizado$values$H
suavizado <- smoothgrid(distribuido, sigma = 200)
entornos <- environments(suavizado, gamma = 500, vars = vars)
distribuido$values$H
suavizado$values$H
entornos$values$H
entornos <- environments(suavizado, gamma = 500, vars = vars)
entornos
roxygen2::roxygenise()
Hp <- tot_p*(E-Ep)/tot/E
roxygen2::roxygenise()
entornos <- environments(suavizado, gamma = 500, vars = vars)
roxygen2::roxygenise()
entornos <- environments(suavizado, gamma = 500, vars = vars)
distribuido$values$H
suavizado$values$H
entornos$values$H
entornos$environments
entornos
roxygen2::roxygenise()
entornos$values$H
entornos <- environments(suavizado, gamma = 500, vars = vars)
plot(entornos, var = "Hp")
plot(entornos, var = "nivel_edu_alto")
roxygen2::roxygenise()
plot(entornos, var = "nivel_edu_alto")
plot(entornos, var = "Hp")
scale_fill_gradient
continuous_scale
ggproto
roxygen2::roxygenise()
entornos <- environments(suavizado, gamma = 500, vars = vars)
plot(entornos, var = "Hp")
plot(distribuido, var = vars[1])
roxygen2::roxygenise()
roxygen2::roxygenise()
plot(entornos, var = "Hp")
entornos$environments
entornos$environments
roxygen2::roxygenise()
plot(entornos, var = "Hp")
roxygen2::roxygenise()
plot(entornos, var = "Hp")
roxygen2::roxygenise()
plot(entornos, var = "Hp")
entornos
entornos$environments
entornos$grid <- entornos$environments
entornos$environments
entornos$environments <- NULL
class(entornos) <- "gridmap"
class(distribuido)
View(distribuido)
View(suavizado)
View(suavizado)
View(entornos)
entornos <- environments(suavizado, gamma = 500, vars = vars)
roxygen2::roxygenise()
suavizado <- smoothgrid(distribuido, sigma = 200)
entornos <- environments(suavizado, gamma = 500, vars = vars)
distribuido$values$H
suavizado$values$H
entornos$values$H
plot(entornos, var = "Hp")
roxygen2::roxygenise()
plot(entornos, var = "Hp")
roxygen2::roxygenise()
plot(entornos, var = "Hp")
roxygen2::roxygenise()
plot(entornos, var = "Hp")
roxygen2::roxygenise()
plot(entornos, var = "Hp")
roxygen2::roxygenise()
roxygen2::roxygenise()
plot(entornos, var = "Hp")
plot(suavizado, var = vars[1])
roxygen2::roxygenise()
plot(suavizado, var = vars[1])
plot(entornos, var = "Hp")
roxygen2::roxygenise()
plot(entornos, var = "Hp")
plot(suavizado, var = vars[1])
roxygen2::roxygenise()
plot(suavizado, var = vars[1])
plot(entornos, var = "Hp")
roxygen2::roxygenise()
plot(entornos, var = "Hp")
plot(entornos, var = "Hp")
plot(suavizado, var = vars[1])
roxygen2::roxygenise()
plot(suavizado, var = vars[1])
plot(entornos, var = "Hp")
roxygen2::roxygenise()
plot(suavizado, var = vars[1])
roxygen2::roxygenise()
plot(entornos, var = "Hp")
roxygen2::roxygenise()
plot(entornos, var = "Hp")
plot(suavizado, var = vars[1])
roxygen2::roxygenise()
plot(suavizado, var = vars[1])
plot(entornos, var = "Hp")
roxygen2::roxygenise()
data(input)
vars <- c("nivel_edu_alto", "nivel_edu_bajo")
distribuido <- input %>%
distribute(lx = 100, vars = vars)
roxygen2::roxygenise()
data(input)
vars <- c("nivel_edu_alto", "nivel_edu_bajo")
distribuido <- input %>%
distribute(lx = 100, vars = vars)
plot(distribuido, var = vars[1])
suavizado <- smoothgrid(distribuido, sigma = 200)
plot(suavizado, var = vars[1])
entornos <- environments(suavizado, gamma = 500, vars = vars)
plot(entornos, var = "Hp")
entornos
distribuido$values$H
suavizado$values$H
entornos$values$H
roxygen2::roxygenise()
distribuido$values$H
suavizado$values$H
entornos$values$H
coef(distribuido)
coef(distribuido)
coef(distribuido)
entornos$values$H
coef(entornos)
roxygen2::roxygenise()
coef(distribuido)
coef(distribuido)
c(a = 2)
roxygen2::roxygenise()
coef(distribuido)
coef(entornos)
roxygen2::roxygenise()
coef(entornos)
coef(suavizado)
coef(entornos)
roxygen2::roxygenise()
coef(distribuido)
coef(suavizado)
coef(entornos)
roxygen2::roxygenise()
coef(entornos)
coef(suavizado)
roxygen2::roxygenise()
coef(entornos)
coef(suavizado)
roxygen2::roxygenise()
coef(entornos)
coef(suavizado)
exists(gamma)
exists("gamma")
gamma
exists("gamma", mode = "numeric")
roxygen2::roxygenise()
coef(entornos)
coef(suavizado)
?exists
roxygen2::roxygenise()
coef(suavizado)
roxygen2::roxygenise()
coef(suavizado)
roxygen2::roxygenise()
coef(suavizado)
roxygen2::roxygenise()
coef(suavizado)
pos.to.env(-1L)
if (exists("gamma", envir = "gridmap")) print("Entornos construidos con gamma = ", gamma)
pos.to.env(-1L)
?pos.to.env
roxygen2::roxygenise()
coef(suavizado)
roxygen2::roxygenise()
coef(suavizado)
coef(suavizado)
names(entornos)
entornos <- environments(suavizado, gamma = 500, vars = vars)
names(entornos)
coef(distribuido)
coef(suavizado)
coef(entornos)
roxygen2::roxygenise()
coef(entornos)
coef(entornos)
coef(suavizado)
entornos
entornos[["gamma"]]
roxygen2::roxygenise()
coef(suavizado)
roxygen2::roxygenise()
roxygen2::roxygenise()
coef(suavizado)
coef(entornos)
roxygen2::roxygenise()
coef(entornos)
coef(suavizado)
roxygen2::roxygenise()
coef(suavizado)
coef(entornos)
roxygen2::roxygenise()
coef(entornos)
roxygen2::roxygenise()
roxygen2::roxygenise()
?st_make_grid()
roxygen2::roxygenise()
roxygen2::roxygenise()
roxygen2::roxygenise()
roxygen2::roxygenise()
data(input)
data(input1985)
roxygen2::roxygenise()
data(input)
data(input195)
data(input1985)
roxygen2::roxygenise()
data(input1985)
data(input)
data(input1985)
roxygen2::roxygenise()
data(input)
data(input1985)
plot(input)
plot(input[,vars[1]])
plot(input[vars[1]])
vars[1]
vars <- c("nivel_edu_alto", "nivel_edu_bajo")
plot(input[vars[1]])
plot(input1985[vars[1]])
data(input1985)
st_make_grid(input1985)
st_make_grid(input1985, cellsize = c(lx, lx))
lx <- 100
st_make_grid(input1985, cellsize = c(lx, lx))
st_make_grid(input1985, cellsize = c(lx, lx)) %>%
plot
lx
st_make_grid(input1985, cellsize = c(1,1))
st_make_grid(input1985, cellsize = c(1,1)) %>% plot
st_make_grid(input1985, cellsize = c(lx, lx))
grid <- st_make_grid(input1985, cellsize = c(lx, lx))
plot(grid)
grid <- st_make_grid(input, cellsize = c(lx, lx))
grid
plot(grid)
input1985
st_crs(input1985)
grid <- st_make_grid(input1985, cellsize = c(lx, lx))
class(input1985)
grid <- st_make_grid(input1985, n = 100)
plot(grid)
grid <- st_make_grid(input1985, n = 50)
plot(grid)
grid <- st_make_grid(input1985, cellsize = c(lx, lx))
grid
input1985 <- st_transform(input1985, crs = st_crs(input))
grid <- st_make_grid(input1985, cellsize = c(lx, lx))
plot(grid)
st_intersect(grid, input)
st_intersects(grid, input)
st_intersects(grid, input) %>% plot
st_intersects(grid, input)
data(input1985)
input1985 <- st_transform(input1985, crs = st_crs(input))
distribuido1985 <- distribute(input1985, lx = lx)
lx
data(input1985)
input1985 <- st_transform(input1985, crs = st_crs(input))
distribuido1985 <- distribute(input1985, lx = lx)
distribuido1985 <- distribute(input1985, lx = lx, vars = vars)
distribuido1985
plot(distribuido1985)
plot(distribuido1985, var = vars[1])
plot(distribuido, var = vars[1])
distribuido <- input %>%
distribute(lx = lx, vars = vars)
plot(distribuido, var = vars[1])
st_union(distribuido, distribuido1985)
st_union(distribuido$grid, distribuido1985$grid)
lx <- 400
distribuido <- distribute(input = input, lx = lx, vars = vars)
lx <- 400
distribuido <- distribute(input = input, lx = lx, vars = vars)
data(input1985)
input1985 <- st_transform(input1985, crs = st_crs(input))
distribuido1985 <- distribute(input1985, lx = lx, vars = vars)
plot(distribuido, var = vars[1])
plot(distribuido1985, var = vars[1])
union <- st_union(distribuido$grid, distribuido1985$grid)
union
plot(union)
union
distribuido$grid
distribuido
st_make_grid(input, cellsize = c(lx, lx))
st_make_grid(input, cellsize = c(lx, lx)) %>% plot
st_intersects(input1985, st_make_grid(input, cellsize = c(lx, lx)))
lx <- 100
distribuido <- distribute(input = input, lx = lx, vars = vars)
data(input1985)
input1985 <- st_transform(input1985, crs = st_crs(input))
st_intersects(input1985, st_make_grid(input, cellsize = c(lx, lx)))
lx <- 100
distribuido <- distribute(input = input, lx = lx, vars = vars)
data(input1985)
input1985 <- st_transform(input1985, crs = st_crs(input))
st_intersects(input1985, st_make_grid(input, cellsize = c(lx, lx)))
st_make_grid(input, cellsize = c(lx, lx))
st_intersects(input1985, st_make_grid(input, cellsize = c(lx, lx)))
st_intersects(input1985, st_make_grid(input, cellsize = c(lx, lx)))
st_make_grid(input, cellsize = c(lx, lx))
st_make_grid(input, cellsize = c(lx, lx)) %>% dim
st_make_grid(input, cellsize = c(lx, lx)) %>% length
st_intersects(input1985, st_make_grid(input, cellsize = c(lx, lx))) %>% length
st_intersects(input1985, st_make_grid(input, cellsize = c(lx, lx)))
grid2011 <- st_make_grid(input, cellsize = c(lx, lx))
grid1985 <- st_make_grid(input1985, cellsize = c(lx, lx))
st_bbox(input2011)
st_bbox(input)
st_bbox(grid2011)
st_bbox(grid1985)
st_bbox(grid2011) %>% plot
st_bbox(grid1985) %>% points(col = 2)
?st_interpolate_aw
st_interpolate_aw(x = input1985, to = input)
input1985
distribuido1985
distribuido1985$grid
distribuido1985 <- distribute(input1985, lx = lx, vars = vars)
distribuido1985$grid
plot(distribuido1985, var = vars[1])
roxygen2::roxygenise()
plot(distribuido, var = vars[1])
plot(distribuido)
roxygen2::roxygenise()
plot(distribuido)
vars
plot(distribuido1985, var = vars[1])
plot(distribuido, var = vars[1])
plot(distribuido)
roxygen2::roxygenise()
plot(distribuido)
roxygen2::roxygenise()
plot(distribuido)
roxygen2::roxygenise()
plot(distribuido)
roxygen2::roxygenise()
st_interpolate_aw(x = distribuido1985$grid, to = input)
st_interpolate_aw(x = distribuido1985$grid, to = distribuido$grid)
prueba <- st_interpolate_aw(x = distribuido1985$grid, to = distribuido$grid, extensive = T)
prueba
plot(prueba)
st_make_grid
roxygen2::roxygenise()
grid2011 <- st_make_grid(input, cellsize = c(lx, lx))
st_bbox(input)
bb <- st_bbox(input)
grid1985 <- st_make_grid2(input1985, bb = bb, cellsize = c(lx, lx))
grid1985
plot(grid1985)
roxygen2::roxygenise()
lx <- 100
distribuido <- distribute(input = input, lx = lx, vars = vars)
bb <- st_bbox(input)
data(input1985)
input1985 <- st_transform(input1985, crs = st_crs(input))
distribuido1985 <- distribute(input1985, lx = lx, bbox = bb, vars = vars)
plot(distribuido)
plot(distribuido1985)
st_centroid(distribuido)
st_centroid(distribuido$grid)
st_centroid(distribuido$grid) %>%
st_coordinates()
st_centroid(distribuido1985$grid) %>%
st_coordinates()
st_centroid(distribuido$grid) %>%
st_coordinates() %>%
plot
st_centroid(distribuido$grid) %>%
st_coordinates() %>%
plot(asp = 1)
st_centroid(distribuido1985$grid) %>%
st_coordinates() %>%
points(col = 2, pch = 20)
lx <- 200
distribuido <- distribute(input = input, lx = lx, vars = vars)
bb <- st_bbox(input)
data(input1985)
input1985 <- st_transform(input1985, crs = st_crs(input))
distribuido1985 <- distribute(input1985, lx = lx, bbox = bb, vars = vars)
lx <- 200
distribuido <- distribute(input = input, lx = lx, vars = vars)
bb <- st_bbox(input)
data(input1985)
input1985 <- st_transform(input1985, crs = st_crs(input))
distribuido1985 <- distribute(input1985, lx = lx, bbox = bb, vars = vars)
plot(distribuido)
plot(distribuido1985)
st_centroid(distribuido$grid) %>%
st_coordinates() %>%
plot(asp = 1)
st_centroid(distribuido1985$grid) %>%
st_coordinates() %>%
points(col = 2, pch = 20)
bb
bb
socialseg::st_make_grid2()
socialseg::st_make_grid2()
roxygen2::roxygenise()
lx <- 200
distribuido <- distribute(input = input, lx = lx, vars = vars)
bb <- st_bbox(input)
data(input1985)
input1985 <- st_transform(input1985, crs = st_crs(input))
distribuido1985 <- distribute(input1985, lx = lx, bbox = bb, vars = vars)
plot(distribuido)
plot(distribuido1985)
st_centroid(distribuido$grid) %>%
st_coordinates() %>%
plot(asp = 1)
st_centroid(distribuido1985$grid) %>%
st_coordinates() %>%
points(col = 2, pch = 20)
lx <- 200
distribuido <- distribute(input = input, lx = lx, vars = vars)
bb <- st_bbox(input)
data(input1985)
input1985 <- st_transform(input1985, crs = st_crs(input))
distribuido1985 <- distribute(input1985, lx = lx, bbox = bb, vars = vars)
roxygen2::roxygenise()
lx <- 200
distribuido <- distribute(input = input, lx = lx, vars = vars)
bb <- st_bbox(input)
data(input1985)
input1985 <- st_transform(input1985, crs = st_crs(input))
distribuido1985 <- distribute(input1985, lx = lx, bbox = bb, vars = vars)
roxygen2::roxygenise()
lx <- 200
distribuido <- distribute(input = input, lx = lx, vars = vars)
bb <- st_bbox(input)
data(input1985)
input1985 <- st_transform(input1985, crs = st_crs(input))
distribuido1985 <- distribute(input1985, lx = lx, bbox = bb, vars = vars)
roxygen2::roxygenise()
lx <- 200
distribuido <- distribute(input = input, lx = lx, vars = vars)
bb <- st_bbox(input)
data(input1985)
input1985 <- st_transform(input1985, crs = st_crs(input))
distribuido1985 <- distribute(input1985, lx = lx, bbox = bb, vars = vars)
plot(distribuido)
plot(distribuido1985)
st_centroid(distribuido$grid) %>%
st_coordinates() %>%
plot(asp = 1)
st_centroid(distribuido1985$grid) %>%
st_coordinates() %>%
points(col = 2, pch = 20)
lx <- 100
distribuido <- distribute(input = input, lx = lx, vars = vars)
bb <- st_bbox(input)
data(input1985)
input1985 <- st_transform(input1985, crs = st_crs(input))
distribuido1985 <- distribute(input1985, lx = lx, bbox = bb, vars = vars)
plot(distribuido)
plot(distribuido1985)
st_centroid(distribuido$grid) %>%
st_coordinates() %>%
plot(asp = 1)
st_centroid(distribuido1985$grid) %>%
st_coordinates() %>%
points(col = 2, pch = 20)
